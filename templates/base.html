<!doctype html>
<html lang="{{ 'ar' if session.get('lang','en')=='ar' else 'en' }}">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>{{ t('app_title') }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="{{ 'rtl' if session.get('lang','en')=='ar' else '' }}">
<header class="header">
  <div class="header-inner">
    <a class="brand" href="/" style="text-decoration:none; display:flex; align-items:center; gap:10px;">
      <span class="akbros-logo">AKBROS</span>
      <span class="app-title">{{ t('app_title') }}</span>
    </a>

    <div class="chips-left">
      {% if session.get('authed') %}
        <span class="small chip">Branch: {{ session.get('retail_branch_name') or '-' }}</span>
        <span class="small chip">Role: {{ session.get('role') }}</span>
      {% endif %}
    </div>

    <nav class="toolbar">
      <a class="icon-btn" href="/orders" title="{{ t('home_orders') }}">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="4" width="18" height="14" rx="1"/><path d="M3 9h18M7 13h6"/>
        </svg>
      </a>
      <a class="icon-btn" href="/invoices" title="{{ t('home_invoices') }}">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
          <path d="M6 3h12v6H6z"/><path d="M6 9v12h12V9"/><path d="M9 13h6M9 17h4"/>
        </svg>
      </a>
      <a class="icon-btn" href="/settings/invoice" title="Settings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3.5"></circle>
          <path d="M19.4 15a1.7 1.7 0 0 0 .3 1.8l.1.1a2 2 0 1 1-2.9 2.9l-.1-.1a1.7 1.7 0 0 0-1.8-.3 1.7 1.7 0 0 0-1 1.5V21a2 2 0 1 1-4 0v-.1a1.7 1.7 0 0 0-1-1.5 1.7 1.7 0 0 0-1.8.3l-.1.1a2 2 0 1 1-2.9-2.9l.1-.1a1.7 1.7 0 0 0 .3-1.8 1.7 1.7 0 0 0-1.5-1H3a2 2 0 1 1 0-4h.1a1.7 1.7 0 0 0 1.5-1 1.7 1.7 0 0 0-.3-1.8l-.1-.1A2 2 0 1 1 7 3.9l.1.1c.5.4 1.2.5 1.8.3H9a1.7 1.7 0 0 0 1-1.5V3a2 2 0 1 1 4 0v.1c0 .7.4 1.2 1 1.5.6.2 1.3.1 1.8-.3l.1-.1A2 2 0 1 1 21 7l-.1.1c-.4.5-.5 1.2-.3 1.8V9c0 .6.4 1.2 1.5 1.8Z"/>
        </svg>
      </a>
      <a class="icon-btn" href="/lang/{{ 'ar' if session.get('lang','en')=='en' else 'en' }}" title="{{ t('lang') }}">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="9"/><path d="M3 12h18M12 3a15 15 0 0 1 0 18M12 3a15 15 0 0 0 0 18"/>
        </svg>
      </a>
      {% if session.get('authed') %}
      <a class="icon-btn" href="/logout" title="Logout">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 8v-3a2 2 0 0 0-2-2h-6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3"/><path d="M7 12h14l-3-3m0 6 3-3"/>
        </svg>
      </a>
      {% endif %}
    </nav>
  </div>
</header>
<div class="container">
  {% with messages = get_flashed_messages() %}
    {% if messages %}{% for m in messages %}<div class="flash">{{m}}</div>{% endfor %}{% endif %}
  {% endwith %}
  {% block body %}{% endblock %}
</div>
</body>
</html>
